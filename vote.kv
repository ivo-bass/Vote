WindowManager:
    EntryWindow:
    VotingWindow:
    SubmitWindow:
    AdminWindow:


<EntryWindow>:
    name: "entry"
    md_bg_color: app.theme_cls.primary_color

    MDCard:
        size_hint: None, None
        size: "400dp", "500dp"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        elevation: "13dp"
        padding: "50dp"
        spacing: "20dp"
        orientation: "vertical"
        focus_behavior: True

        MDSeparator:
            height: "2dp"

        MDTextFieldRound:
            id: pin_input
            hint_text: "Въведете ПИН"
            font_size: 20
            max_text_length: 5
            icon_left: 'key-variant'
            size_hint_x: None
            width: 200
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

        MDSeparator:
            height: "2dp"

        MDGridLayout:
            id: keypad
            cols: 3
            rows: 4
            spacing: "10dp"

            MDFillRoundFlatButton:
                text: "1"
                font_size: 20
                on_press: root.btn_press(self.text)

            MDFillRoundFlatButton:
                text: "2"
                font_size: 20
                on_press: root.btn_press("2")

            MDFillRoundFlatButton:
                text: "3"
                font_size: 20
                on_press: root.btn_press("3")

            MDFillRoundFlatButton:
                text: "4"
                font_size: 20
                on_press: root.btn_press("4")

            MDFillRoundFlatButton:
                text: "5"
                font_size: 20
                on_press: root.btn_press("5")

            MDFillRoundFlatButton:
                text: "6"
                font_size: 20
                on_press: root.btn_press("6")

            MDFillRoundFlatButton:
                text: "7"
                font_size: 20
                on_press: root.btn_press("7")

            MDFillRoundFlatButton:
                text: "8"
                font_size: 20
                on_press: root.btn_press("8")

            MDFillRoundFlatButton:
                text: "9"
                font_size: 20
                on_press: root.btn_press("9")

            MDRoundFlatButton:
                text: "*"

            MDFillRoundFlatButton:
                text: "0"
                font_size: 20
                on_press: root.btn_press("0")

            MDRoundFlatButton:
                text: "#"


        MDFillRoundFlatButton:
            text: "ПРОДЪЛЖИ"
            pos_hint: {"center_x": 0.5}
            on_release:
                if root.ids.pin_input.text in app.VOTER_PINS: app.root.current = "voting"
                elif root.ids.pin_input.text in app.ADMIN_PINS: app.root.current = "admin"
                else: root.clear_field()
                root.manager.transition.direction = "left"

        MDRoundFlatButton:
            id: clear
            text: " ИЗЧИСТИ "
            pos_hint: {"center_x": 0.5}
            on_press: root.clear_field()



<VotingWindow>:
    name: "voting"

    MDBoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: "10dp"

        MDToolbar:
            elevation: 10
            title: "Списък на партии, коалиции и независими кандидати:"

        ScrollView:
            MDList:
                id: scroll

        MDFillRoundFlatButton:
            id: vote_btn
            text: "ГЛАСУВАЙ"
            pos_hint: {"center_x": 0.5}
            on_press:
                root.vote()




<SubmitWindow>:
    name: "submit"
    md_bg_color: app.theme_cls.primary_color

    MDCard:
        size_hint: None, None
        size: "400dp", "500dp"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        elevation: "13dp"
        padding: "50dp"
        spacing: "20dp"
        orientation: "vertical"
        focus_behavior: True

        MDSeparator:
            height: "2dp"

        MDLabel:
            id: submit_label
            text: ""
            pos_hint: {"center_x": 0.5, "center_y": 0.5}


        MDSeparator:
            height: "2dp"

        MDFillRoundFlatButton:
            text: "ПОТВЪРДИ"
            pos_hint: {"center_x": 0.5}
            on_press:
                app.is_final_vote = True
                root.submit()


        MDRoundFlatButton:
            text: "ПРОМЕНИ"
            pos_hint: {"center_x": 0.5}
            on_release:
                app.root.current = "voting"
                root.manager.transition.direction = "right"


<AdminWindow>:
    name: "admin"


<ListItem>:
    id: list_item
